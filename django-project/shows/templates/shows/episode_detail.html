{% extends 'base.html' %}
{% load markdownify %}

{% block content %}
    <div class="background" aria-hidden="true" style="">
        <img src="{{ episode.image_url }}" style="">
    </div>
    <div id="pc-container">
        <header class="pc-head">
            {%  if episode.show.custom_banner %}
                <a href="{{ episode.show.get_absolute_url }}">
                <img class="show-banner" src="{{ episode.show.custom_banner.url }}" alt="{{ episode.show.name }} logo">
                </a>
                {% else %}
                <h1>{{ episode.show.name }}</h1>
            {%  endif %}

            <div class="text">
                {{ episode.show.text | markdownify | safe }}
            </div>
        </header>
        <article>
            <figure>
                <img src="{{ episode.image_url }}" alt="{{ episode.image_alt }}">
                {% if episode.image_caption %}
                    <figcaption>
                        <p>{{ episode.image_caption }}</p>
                        {% if episode.image_credit %}
                            <p>{{ episode.image_credit }}</p>
                        {% endif %}
                        {% if episode.image_source %}
                            <p>{{ episode.image_source }}</p>
                        {% endif %}
                    </figcaption>
                {% endif %}
            </figure>
                    <a href="{{ episode.show.get_absolute_url }}" class="episode-list-link"><i class="fas fa-stream"></i> View All Episodes</a>
            <h2>{{ episode.name }}</h2>
            <audio id="ply-{{ episode.story_api_id }}" controls controlsList="nodownload">
                <source src="{{ episode.audio_url }}" type="audio/mp3">
            </audio>
            <script>
                player = new Plyr('#ply-{{ episode.story_api_id }}');
            </script>
            {{ episode.text | markdownify | safe }}
        </article>
    </div>
{% endblock content %}